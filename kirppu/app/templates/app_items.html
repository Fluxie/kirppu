{% load compressed %}
{% load staticfiles %}
<!doctype html>
<html>
<head>
    <title>Item listing</title>
    {% compressed_css 'general' %}
    {% compressed_css 'price_tags' %}
    {% compressed_js 'general' %}
    {% compressed_js 'jeditable' %}
    {% compressed_js 'price_tags' %}
</head>
<body>
    <form id="item-add-form" method="POST" class="form-horizontal">
        {% csrf_token %}
        <p class="help-block">
            Set the name and price of your item and press 'Add item'.
            Name and price can be modified later.
        </p>
        <p class="help-block">
            Modify the size of the price tags by setting size.
            Size can be modified later by pressing the arrow button on the price tag.
        </p>
        <p class="help-block">
            Register more than one similar items at once by adding a suffix.
            Name 'Manga ' and suffix '1-3' would create items 'Manga 1', 'Manga 2' and 'Manga 3'.
            Suffix 'Blue Red' would create items 'Manga Blue' and 'Manga Red'.
        </p>
        <div class="form-group">
            <label for="item-add-name" class="col-sm-1 control-label">Name:</label>
            <div class="col-sm-6">
                <input id="item-add-name" type="text" class="form-control" placeholder="Ranma Â½ Vol. " />
            </div>

            <label for="item-add-suffixes" class="col-sm-1 control-label">Suffixes:</label>
            <div class="col-sm-4 ">
                <input id="item-add-suffixes" type="text" class="form-control" placeholder="1 3-5  A B  Blue" />
            </div>
        </div>
        <div class="form-group">
            <label for="item-add-price" class="col-sm-1 control-label">Price:</label>
            <div class="col-sm-2">
                <input id="item-add-price" type="text" class="form-control" value="5" />
            </div>
            <label class="control-label">&euro;</label>
        </div>
        <div class="form-group">
            <label class="col-sm-1 control-label">Size:</label>
            <div class="col-sm-4">
                <label class="radio-inline">
                    <input name="item-add-type" value="tiny" type="radio" />Tiny
                </label>
                <label class="radio-inline">
                    <input name="item-add-type" value="short" type="radio" checked="checked" />Short
                </label>
                <label class="radio-inline">
                    <input name="item-add-type" value="long" type="radio" />Long
                </label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-1 col-sm-3">
                <button id="add_short_item" type="button" class="btn btn-primary">Add item</button>
            </div>
            <div class="col-sm-8 text-right">
                <button id="list_view" type="button" class="btn btn-default">Toggle List View</button>
                <button id="delete_all" type="button" class="btn btn-default">Delete all items</button>
                <button id="toggle_delete" type="button" class="btn btn-default">Toggle delete</button>
            </div>
        </div>
    </form>

    <script>
        itemsConfig.url_args.code = '__placeholder__';
        itemsConfig.urls.item_add = "{% url 'kirppu:item_add' %}";
        itemsConfig.urls.barcode_img = "{% url 'kirppu:barcode' '__placeholder__' bar_type %}";
        itemsConfig.urls.price_update = "{% url 'kirppu:item_update_price' '__placeholder__' %}";
        itemsConfig.urls.name_update = "{% url 'kirppu:item_update_name' '__placeholder__' %}";
        itemsConfig.urls.item_delete = "{% url 'kirppu:item_delete' '__placeholder__' %}";
        itemsConfig.urls.size_update = "{% url 'kirppu:item_update_type' '__placeholder__' %}";
        itemsConfig.urls.items_delete_all = "{% url 'kirppu:page' %}";
        itemsConfig.urls.roller = "{% static "img/roller.gif" %}";
        itemsConfig.urls.item_to_print = "{% url 'kirppu:item_to_print' '__placeholder__' %}";

        $(document).ready(function() {
            setupAjax();

            bindFormEvents();

            bindTagEvents($('#items > .item_container'));
            bindListTagEvents($('#printed_items > .item_container'));
        });
    </script>

    {# Output a single item_container as a template for javascript. #}
    {% include 'app_items_item.html' with tag_type="template" name="" price="0" code="X" vendor_id="" %}
    
    <div id="items">
        {# Output a template container for every non-printed item user has. #}
        {% for i in items %}
            {% include 'app_items_item.html' with name=i.name price=i.price code=i.code vendor_id=i.vendor_id tag_type=i.type %}
        {% endfor %}
    </div>
    <div style="margin-top: 1cm" id="printed_items">
        {# Output a template container for every printed item user has. #}
        {% for i in printed_items %}
            {% include 'app_items_item.html' with name=i.name price=i.price code=i.code vendor_id=i.vendor_id tag_type="list" %}
        {% endfor %}
    </div>
</body>
</html>
